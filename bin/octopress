#! /usr/bin/env ruby

$LOAD_PATH.unshift(File.expand_path("../lib", File.dirname(__FILE__)))

require 'mercenary'
require 'octopress'

Mercenary.program(:octopress) do |p|
  p.command(:build) do |c|
    c.syntax "octopress build [options]"

    c.option 'watch', '--watch', 'Rebuild site source upon every change.'

    c.action do |args, options|
      Octopress::Commands::Build.run(args, options)
    end
  end

  p.command(:theme) do |c|
    c.command(:install) do |i|
      i.action do |_, _|
        Octopress::Theme.install
      end
    end

    c.command(:unpack) do |u|
      u.action do |_, _|
        Octopress::Theme.theme_unpack_opts(u)
      end
    end
  end
end
